/*!
 * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):"object"==typeof exports?exports.CKEditor=e(require("vue")):t.CKEditor=e(t.Vue)}(self,t=>(()=>{"use strict";var e={976:e=>{e.exports=t}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{o.d(n,{default:()=>Vr});var t=o(976);const e=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const r="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const s=r||i||Function("return this")();const c=function(){return s.Date.now()};var a=/\s/;const u=function(t){for(var e=t.length;e--&&a.test(t.charAt(e)););return e};var l=/^\s+/;const h=function(t){return t?t.slice(0,u(t)+1).replace(l,""):t};const d=s.Symbol;var f=Object.prototype,p=f.hasOwnProperty,b=f.toString,y=d?d.toStringTag:void 0;const _=function(t){var e=p.call(t,y),r=t[y];try{t[y]=void 0;var o=!0}catch(t){}var n=b.call(t);return o&&(e?t[y]=r:delete t[y]),n};var v=Object.prototype.toString;const g=function(t){return v.call(t)};var m=d?d.toStringTag:void 0;const j=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":m&&m in Object(t)?_(t):g(t)};const w=function(t){return null!=t&&"object"==typeof t};const E=function(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==j(t)};var O=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,A=/^0o[0-7]+$/i,S=parseInt;const D=function(t){if("number"==typeof t)return t;if(E(t))return NaN;if(e(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=e(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=h(t);var o=x.test(t);return o||A.test(t)?S(t.slice(2),o?2:8):O.test(t)?NaN:+t};var P=Math.max,T=Math.min;const C=function(t,r,o){var n,i,s,a,u,l,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var r=n,o=i;return n=i=void 0,h=e,a=t.apply(o,r)}function y(t){return h=t,u=setTimeout(v,r),d?b(t):a}function _(t){var e=t-l;return void 0===l||e>=r||e<0||f&&t-h>=s}function v(){var t=c();if(_(t))return g(t);u=setTimeout(v,function(t){var e=r-(t-l);return f?T(e,s-(t-h)):e}(t))}function g(t){return u=void 0,p&&n?b(t):(n=i=void 0,a)}function m(){var t=c(),e=_(t);if(n=arguments,i=this,l=t,e){if(void 0===u)return y(l);if(f)return clearTimeout(u),u=setTimeout(v,r),b(l)}return void 0===u&&(u=setTimeout(v,r)),a}return r=D(r)||0,e(o)&&(d=!!o.leading,s=(f="maxWait"in o)?P(D(o.maxWait)||0,r):s,p="trailing"in o?!!o.trailing:p),m.cancel=function(){void 0!==u&&clearTimeout(u),h=0,n=l=i=u=void 0},m.flush=function(){return void 0===u?a:g(c())},m};const N=function(t,r,o){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return e(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),C(t,r,{leading:n,maxWait:r,trailing:i})};const z=function(){this.__data__=[],this.size=0};const I=function(t,e){return t===e||t!=t&&e!=e};const R=function(t,e){for(var r=t.length;r--;)if(I(t[r][0],e))return r;return-1};var V=Array.prototype.splice;const F=function(t){var e=this.__data__,r=R(e,t);return!(r<0)&&(r==e.length-1?e.pop():V.call(e,r,1),--this.size,!0)};const k=function(t){var e=this.__data__,r=R(e,t);return r<0?void 0:e[r][1]};const M=function(t){return R(this.__data__,t)>-1};const $=function(t,e){var r=this.__data__,o=R(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};function U(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}U.prototype.clear=z,U.prototype.delete=F,U.prototype.get=k,U.prototype.has=M,U.prototype.set=$;const L=U;const W=function(){this.__data__=new L,this.size=0};const B=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};const H=function(t){return this.__data__.get(t)};const K=function(t){return this.__data__.has(t)};const q=function(t){if(!e(t))return!1;var r=j(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r};const G=s["__core-js_shared__"];var J,Q=(J=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"";const X=function(t){return!!Q&&Q in t};var Y=Function.prototype.toString;const Z=function(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var tt=/^\[object .+?Constructor\]$/,et=Function.prototype,rt=Object.prototype,ot=et.toString,nt=rt.hasOwnProperty,it=RegExp("^"+ot.call(nt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const st=function(t){return!(!e(t)||X(t))&&(q(t)?it:tt).test(Z(t))};const ct=function(t,e){return null==t?void 0:t[e]};const at=function(t,e){var r=ct(t,e);return st(r)?r:void 0};const ut=at(s,"Map");const lt=at(Object,"create");const ht=function(){this.__data__=lt?lt(null):{},this.size=0};const dt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var ft=Object.prototype.hasOwnProperty;const pt=function(t){var e=this.__data__;if(lt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return ft.call(e,t)?e[t]:void 0};var bt=Object.prototype.hasOwnProperty;const yt=function(t){var e=this.__data__;return lt?void 0!==e[t]:bt.call(e,t)};const _t=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=lt&&void 0===e?"__lodash_hash_undefined__":e,this};function vt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}vt.prototype.clear=ht,vt.prototype.delete=dt,vt.prototype.get=pt,vt.prototype.has=yt,vt.prototype.set=_t;const gt=vt;const mt=function(){this.size=0,this.__data__={hash:new gt,map:new(ut||L),string:new gt}};const jt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const wt=function(t,e){var r=t.__data__;return jt(e)?r["string"==typeof e?"string":"hash"]:r.map};const Et=function(t){var e=wt(this,t).delete(t);return this.size-=e?1:0,e};const Ot=function(t){return wt(this,t).get(t)};const xt=function(t){return wt(this,t).has(t)};const At=function(t,e){var r=wt(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this};function St(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}St.prototype.clear=mt,St.prototype.delete=Et,St.prototype.get=Ot,St.prototype.has=xt,St.prototype.set=At;const Dt=St;const Pt=function(t,e){var r=this.__data__;if(r instanceof L){var o=r.__data__;if(!ut||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new Dt(o)}return r.set(t,e),this.size=r.size,this};function Tt(t){var e=this.__data__=new L(t);this.size=e.size}Tt.prototype.clear=W,Tt.prototype.delete=B,Tt.prototype.get=H,Tt.prototype.has=K,Tt.prototype.set=Pt;const Ct=Tt;const Nt=function(t,e){for(var r=-1,o=null==t?0:t.length;++r<o&&!1!==e(t[r],r,t););return t};const zt=function(){try{var t=at(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const It=function(t,e,r){"__proto__"==e&&zt?zt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Rt=Object.prototype.hasOwnProperty;const Vt=function(t,e,r){var o=t[e];Rt.call(t,e)&&I(o,r)&&(void 0!==r||e in t)||It(t,e,r)};const Ft=function(t,e,r,o){var n=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var c=e[i],a=o?o(r[c],t[c],c,r,t):void 0;void 0===a&&(a=t[c]),n?It(r,c,a):Vt(r,c,a)}return r};const kt=function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o};const Mt=function(t){return w(t)&&"[object Arguments]"==j(t)};var $t=Object.prototype,Ut=$t.hasOwnProperty,Lt=$t.propertyIsEnumerable;const Wt=Mt(function(){return arguments}())?Mt:function(t){return w(t)&&Ut.call(t,"callee")&&!Lt.call(t,"callee")};const Bt=Array.isArray;const Ht=function(){return!1};var Kt="object"==typeof exports&&exports&&!exports.nodeType&&exports,qt=Kt&&"object"==typeof module&&module&&!module.nodeType&&module,Gt=qt&&qt.exports===Kt?s.Buffer:void 0;const Jt=(Gt?Gt.isBuffer:void 0)||Ht;var Qt=/^(?:0|[1-9]\d*)$/;const Xt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Qt.test(t))&&t>-1&&t%1==0&&t<e};const Yt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Zt={};Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;const te=function(t){return w(t)&&Yt(t.length)&&!!Zt[j(t)]};const ee=function(t){return function(e){return t(e)}};var re="object"==typeof exports&&exports&&!exports.nodeType&&exports,oe=re&&"object"==typeof module&&module&&!module.nodeType&&module,ne=oe&&oe.exports===re&&r.process;const ie=function(){try{var t=oe&&oe.require&&oe.require("util").types;return t||ne&&ne.binding&&ne.binding("util")}catch(t){}}();var se=ie&&ie.isTypedArray;const ce=se?ee(se):te;var ae=Object.prototype.hasOwnProperty;const ue=function(t,e){var r=Bt(t),o=!r&&Wt(t),n=!r&&!o&&Jt(t),i=!r&&!o&&!n&&ce(t),s=r||o||n||i,c=s?kt(t.length,String):[],a=c.length;for(var u in t)!e&&!ae.call(t,u)||s&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Xt(u,a))||c.push(u);return c};var le=Object.prototype;const he=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||le)};const de=function(t,e){return function(r){return t(e(r))}};const fe=de(Object.keys,Object);var pe=Object.prototype.hasOwnProperty;const be=function(t){if(!he(t))return fe(t);var e=[];for(var r in Object(t))pe.call(t,r)&&"constructor"!=r&&e.push(r);return e};const ye=function(t){return null!=t&&Yt(t.length)&&!q(t)};const _e=function(t){return ye(t)?ue(t):be(t)};const ve=function(t,e){return t&&Ft(e,_e(e),t)};const ge=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e};var me=Object.prototype.hasOwnProperty;const je=function(t){if(!e(t))return ge(t);var r=he(t),o=[];for(var n in t)("constructor"!=n||!r&&me.call(t,n))&&o.push(n);return o};const we=function(t){return ye(t)?ue(t,!0):je(t)};const Ee=function(t,e){return t&&Ft(e,we(e),t)};var Oe="object"==typeof exports&&exports&&!exports.nodeType&&exports,xe=Oe&&"object"==typeof module&&module&&!module.nodeType&&module,Ae=xe&&xe.exports===Oe?s.Buffer:void 0,Se=Ae?Ae.allocUnsafe:void 0;const De=function(t,e){if(e)return t.slice();var r=t.length,o=Se?Se(r):new t.constructor(r);return t.copy(o),o};const Pe=function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e};const Te=function(t,e){for(var r=-1,o=null==t?0:t.length,n=0,i=[];++r<o;){var s=t[r];e(s,r,t)&&(i[n++]=s)}return i};const Ce=function(){return[]};var Ne=Object.prototype.propertyIsEnumerable,ze=Object.getOwnPropertySymbols;const Ie=ze?function(t){return null==t?[]:(t=Object(t),Te(ze(t),(function(e){return Ne.call(t,e)})))}:Ce;const Re=function(t,e){return Ft(t,Ie(t),e)};const Ve=function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t};const Fe=de(Object.getPrototypeOf,Object);const ke=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ve(e,Ie(t)),t=Fe(t);return e}:Ce;const Me=function(t,e){return Ft(t,ke(t),e)};const $e=function(t,e,r){var o=e(t);return Bt(t)?o:Ve(o,r(t))};const Ue=function(t){return $e(t,_e,Ie)};const Le=function(t){return $e(t,we,ke)};const We=at(s,"DataView");const Be=at(s,"Promise");const He=at(s,"Set");const Ke=at(s,"WeakMap");var qe=Z(We),Ge=Z(ut),Je=Z(Be),Qe=Z(He),Xe=Z(Ke),Ye=j;(We&&"[object DataView]"!=Ye(new We(new ArrayBuffer(1)))||ut&&"[object Map]"!=Ye(new ut)||Be&&"[object Promise]"!=Ye(Be.resolve())||He&&"[object Set]"!=Ye(new He)||Ke&&"[object WeakMap]"!=Ye(new Ke))&&(Ye=function(t){var e=j(t),r="[object Object]"==e?t.constructor:void 0,o=r?Z(r):"";if(o)switch(o){case qe:return"[object DataView]";case Ge:return"[object Map]";case Je:return"[object Promise]";case Qe:return"[object Set]";case Xe:return"[object WeakMap]"}return e});const Ze=Ye;var tr=Object.prototype.hasOwnProperty;const er=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&tr.call(t,"index")&&(r.index=t.index,r.input=t.input),r};const rr=s.Uint8Array;const or=function(t){var e=new t.constructor(t.byteLength);return new rr(e).set(new rr(t)),e};const nr=function(t,e){var r=e?or(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)};var ir=/\w*$/;const sr=function(t){var e=new t.constructor(t.source,ir.exec(t));return e.lastIndex=t.lastIndex,e};var cr=d?d.prototype:void 0,ar=cr?cr.valueOf:void 0;const ur=function(t){return ar?Object(ar.call(t)):{}};const lr=function(t,e){var r=e?or(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};const hr=function(t,e,r){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return or(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return nr(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return lr(t,r);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return sr(t);case"[object Set]":return new o;case"[object Symbol]":return ur(t)}};var dr=Object.create;const fr=function(){function t(){}return function(r){if(!e(r))return{};if(dr)return dr(r);t.prototype=r;var o=new t;return t.prototype=void 0,o}}();const pr=function(t){return"function"!=typeof t.constructor||he(t)?{}:fr(Fe(t))};const br=function(t){return w(t)&&"[object Map]"==Ze(t)};var yr=ie&&ie.isMap;const _r=yr?ee(yr):br;const vr=function(t){return w(t)&&"[object Set]"==Ze(t)};var gr=ie&&ie.isSet;const mr=gr?ee(gr):vr;var jr={};jr["[object Arguments]"]=jr["[object Array]"]=jr["[object ArrayBuffer]"]=jr["[object DataView]"]=jr["[object Boolean]"]=jr["[object Date]"]=jr["[object Float32Array]"]=jr["[object Float64Array]"]=jr["[object Int8Array]"]=jr["[object Int16Array]"]=jr["[object Int32Array]"]=jr["[object Map]"]=jr["[object Number]"]=jr["[object Object]"]=jr["[object RegExp]"]=jr["[object Set]"]=jr["[object String]"]=jr["[object Symbol]"]=jr["[object Uint8Array]"]=jr["[object Uint8ClampedArray]"]=jr["[object Uint16Array]"]=jr["[object Uint32Array]"]=!0,jr["[object Error]"]=jr["[object Function]"]=jr["[object WeakMap]"]=!1;const wr=function t(r,o,n,i,s,c){var a,u=1&o,l=2&o,h=4&o;if(n&&(a=s?n(r,i,s,c):n(r)),void 0!==a)return a;if(!e(r))return r;var d=Bt(r);if(d){if(a=er(r),!u)return Pe(r,a)}else{var f=Ze(r),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Jt(r))return De(r,u);if("[object Object]"==f||"[object Arguments]"==f||p&&!s){if(a=l||p?{}:pr(r),!u)return l?Me(r,Ee(a,r)):Re(r,ve(a,r))}else{if(!jr[f])return s?r:{};a=hr(r,f,u)}}c||(c=new Ct);var b=c.get(r);if(b)return b;c.set(r,a),mr(r)?r.forEach((function(e){a.add(t(e,o,n,e,r,c))})):_r(r)&&r.forEach((function(e,i){a.set(i,t(e,o,n,i,r,c))}));var y=d?void 0:(h?l?Le:Ue:l?we:_e)(r);return Nt(y||r,(function(e,i){y&&(e=r[i=e]),Vt(a,i,t(e,o,n,i,r,c))})),a};const Er=function(t,e){return wr(t,5,e="function"==typeof e?e:void 0)};var Or=Function.prototype,xr=Object.prototype,Ar=Or.toString,Sr=xr.hasOwnProperty,Dr=Ar.call(Object);const Pr=function(t){if(!w(t)||"[object Object]"!=j(t))return!1;var e=Fe(t);if(null===e)return!0;var r=Sr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ar.call(r)==Dr};const Tr=function(t){return w(t)&&1===t.nodeType&&!Pr(t)};function Cr(t,e=new Set){const r=[t],o=new Set;let n=0;for(;r.length>n;){const t=r[n++];if(!(o.has(t)||Nr(t)||e.has(t)))if(o.add(t),t[Symbol.iterator])try{for(const e of t)r.push(e)}catch(t){}else for(const e in t)"defaultValue"!==e&&r.push(t[e])}return o}function Nr(t){const e=Object.prototype.toString.call(t),r=typeof t;return"number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t instanceof EventTarget||t instanceof Event}class zr extends class{constructor(t){if(this.crashes=[],this.state="initializing",this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._now=Date.now,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const e=t.error||t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){const r=this._listeners[t]||[];for(const t of r)t.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e.filename,lineno:e.lineno,colno:e.colno,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;return(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}{constructor(t,e={}){super(e),this._editor=null,this._throttledSave=N(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),this._creator=(e,r)=>t.create(e,r),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{if("string"==typeof this._elementOrData)return this.create(this._data,this._config,this._config.context);{const t=Object.assign({},this._config,{initialData:this._data});return this.create(this._elementOrData,t,t.context)}}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,r){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=t,this._config=this._cloneEditorConfiguration(e)||{},this._config.context=r,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.flush();const t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){const t=this._editor.model.document.version;try{this._data=this._getData(),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){const t={};for(const e of this._editor.model.document.getRootNames())t[e]=this._editor.data.get({rootName:e});return t}_isErrorComingFromThisItem(t){return function(t,e,r=new Set){if(t===e&&("object"==typeof(o=t)&&null!==o))return!0;var o;const n=Cr(t,r),i=Cr(e,r);for(const t of n)if(i.has(t))return!0;return!1}(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){return Er(t,(t,e)=>Tr(t)||"context"===e?t:void 0)}}const Ir={name:"ckeditor",created(){this.watchdog=null,this.lastEditorData="";const{CKEDITOR_VERSION:t}=window;if(t){const[e]=t.split(".").map(Number);e<34&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 34 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')},render(){return(0,t.h)(this.tagName)},model:{prop:"modelValue",event:"update:modelValue"},emits:["update:modelValue","input","focus","blur","error","ready","destroy"],props:{editor:{type:Function,default:null},modelValue:{type:String,default:""},config:{type:Object,default:()=>({})},tagName:{type:String,default:"div"},disabled:{type:Boolean,default:!1},inputDebounce:{type:Number,default:300},inputDebounceLeading:{type:Boolean,default:!0}},mounted(){this._initializeEditor()},beforeUnmount(){const t=this.getEditor();this._destroyEditor(),this.$emit("destroy",t)},watch:{modelValue(t){const e=this.getEditor();e&&t!==this.lastEditorData&&e.setData(t)},disabled(t){const e=this.getEditor();e&&(t?e.enableReadOnlyMode("ckeditor-vue"):e.disableReadOnlyMode("ckeditor-vue"))}},methods:{setUpEditorEvents(t){const e=C(e=>{const r=this.lastEditorData=t.getData();this.$emit("update:modelValue",r,e,t),this.$emit("input",r,e,t)},this.inputDebounce,{leading:this.inputDebounceLeading});t.model.document.on("change:data",e),t.editing.view.document.on("focus",e=>{this.$emit("focus",e,t)}),t.editing.view.document.on("blur",e=>{this.$emit("blur",e,t)})},getWatchdog:()=>zr,getEditor(){return this.watchdog&&this.watchdog.editor},_initializeEditor(){const e=this.getWatchdog();this.watchdog=(0,t.markRaw)(new e(this.editor)),this.watchdog.setCreator((t,e)=>this._createEditor(t,e)),this.watchdog.on("error",(t,{error:e,causesRestart:r})=>{console.error("watchdog",e),this.$emit("error",{phase:"runtime",willEditorRestart:r,error:e})}),this.watchdog.on("restart",()=>{console.log("Editor was restarted.")}),this.watchdog.on("stateChange",()=>{if(!this.watchdog)return;const t=this.watchdog.state;console.log("watchdog",t),"crashedPermanently"===t&&this.getEditor()&&(console.log("Editor has crashed permanently."),this.getEditor().enableReadOnlyMode("crashed-editor"))}),this.watchdog.create(this.$el,this._getConfig()).catch(t=>{console.error(t),this.$emit("error",{phase:"initialization",willEditorRestart:!1,error:t})})},_destroyEditor(){this.watchdog&&(this.watchdog.destroy(),this.watchdog=null)},_createEditor(t,e){return this.editor.create(t,e).then(t=>(this.setUpEditorEvents(t),this.modelValue!==e.initialData&&t.setData(this.modelValue),this.disabled&&t.enableReadOnlyMode("ckeditor-vue"),this.$emit("ready",t),t))},_getConfig(){const t=Object.assign({},this.config);return this.modelValue&&(t.initialData=this.modelValue),t}}},[Rr]=function(){if(t.version)return t.version;if(t.default)return t.default.version}().split(".").map(t=>parseInt(t,10));if(Rr<3)throw new Error("The CKEditor plugin works only with Vue 3+. For more information, please refer to https://ckeditor.com/docs/ckeditor5/latest/builds/guides/integration/frameworks/vuejs-v3.html");const Vr={install(t){t.component("ckeditor",Ir)},component:Ir}})(),n=n.default})());
//# sourceMappingURL=ckeditor.js.map